<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="module" ,src="https://www.gstatic.com/firebasejs/9.9.2/firebase-app.js"></script>
    <script defer src="./init-firebase.js"></script>
    <title>Document</title>
</head>
<body >
    <script defer src="/__/firebase/9.9.2/firebase/app.js"></script>
    <script defer src="/__/firebase/9.9.2/firebase-app-compat.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/9.9.2/firebase-auth-compat.js"></script>
    <script defer src="/__/firebase/9.9.2/firebase-database-compat.js"></script>
    파이어베이스 실시간으로 웹페이지 연동하기 </br>
    Firebase + Realtime + Web 
    <p id="demo">A Paragraph.</p>
    <pre id="object"></pre>
    <button type="button" onclick="myFunction()" ondblclick="writeUserData()">데이터 쓰기</button>
    
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.9.2/firebase-app.js';
        //import { getRealtimedb ,ref , set} from './firebase/database';
        import { getRealtimedb ,ref , get} from './firebase/database';
        import { getDatabase } from "./firebase/database";
        import firebase from "./firebase/app";
        import "./firebase/database";


        const firebaseConfig = {
            apiKey: "AIzaSyAVjfBhilux_3BIyx486cRR2dsybsseKA8",
            authDomain: "team-a5651.firebaseapp.com",
            databaseURL: "https://team-a5651-default-rtdb.firebaseio.com",
            projectId: "team-a5651",
            storageBucket: "team-a5651.appspot.com",
            messagingSenderId: "804446190852",
            appId: "1:804446190852:web:66473b851c3cfc1792e451"
        };
        // firebase.initializeApp(firebaseConfig);
        // const database = firebase.database();
        const app=initializeApp(firebaseConfig);
        const db = getRealtimedb(app);
        const database = getDatabase(app);
        async function getCities(db) {
            const citiesCol = collection(db, 'cities');
            const citySnapshot = await getDocs(citiesCol);
            const cityList = citySnapshot.docs.map(doc => doc.data());
            return cityList;
        }
        const dbRef = ref(getDatabase());
        get(child(dbRef, `users/${userId}`)).then((snapshot) => {
        if (snapshot.exists()) {
            console.log(snapshot.val());
        } else {
            console.log("No data available");
        }
        }).catch((error) => {
        console.error(error);
        });
    </script>
    <script>
        //console.log(firebaseConfig.databaseURL);
        function myFunction() {
          document.getElementById("demo").innerHTML = "쓰기를 완료";
          alert("쓰기 완료");
          
          //firebase에 쓰기
          //firebase.database().ref('test/').set({"name":"tes1","ddd":"dfdfdf"});
          function writeUserData() {
            firebase.database().ref('test/' + userId).set({
                username: "test1",
                email: "dlf;ksadjlfkjas"
                });
          }
      }

    </script>
</body>
</html>